# 阿里云域名访问被拦截解决方案

## 问题描述
域名 `learning-system.top` 访问时显示"域名暂时无法访问"，返回403错误，服务器显示为"Beaver"（阿里云安全策略）。

## 当前状态
- ✅ DNS解析正常：learning-system.top → 120.24.22.244
- ✅ 服务器应用正常：PM2 + Nginx 运行中
- ✅ IP访问正常：http://120.24.22.244 返回200
- ❌ 域名访问被拦截：http://learning-system.top 返回403

## 解决方案

### 方案1：域名备案（推荐）
1. 登录阿里云控制台
2. 进入"域名与网站" → "备案管理"
3. 点击"开始备案"
4. 填写网站信息：
   - 网站名称：学习系统
   - 网站类型：个人网站/企业网站
   - 服务器：120.24.22.244
5. 提交备案申请（通常需要7-20个工作日）

### 方案2：安全组检查
1. 进入"云服务器ECS" → "实例"
2. 找到服务器实例，点击"安全组"
3. 确保以下端口开放：
   - 80端口：HTTP访问
   - 443端口：HTTPS访问（未来SSL证书）
   - 22端口：SSH访问

### 方案3：域名解析优化
1. 进入"域名" → "解析设置"
2. 确认以下记录存在：
   ```
   记录类型: A
   主机记录: @
   记录值: 120.24.22.244
   TTL: 600
   
   记录类型: A
   主机记录: www
   记录值: 120.24.22.244
   TTL: 600
   ```

## 临时访问方案

### 1. 直接IP访问
- 访问地址：http://120.24.22.244
- 功能完全正常，可以正常使用学习系统

### 2. 本地hosts文件修改（仅限测试）
**macOS/Linux:**
```bash
sudo echo "120.24.22.244 learning-system.top" >> /etc/hosts
sudo echo "120.24.22.244 www.learning-system.top" >> /etc/hosts
```

**Windows:**
1. 以管理员身份打开记事本
2. 打开文件：C:\Windows\System32\drivers\etc\hosts
3. 添加以下行：
   ```
   120.24.22.244 learning-system.top
   120.24.22.244 www.learning-system.top
   ```

## 服务器状态确认

### 应用状态
- PM2进程：learning-system (运行中)
- Nginx服务：active (running)
- 端口监听：3000 (应用), 80 (Nginx)

### 测试命令
```bash
# 测试IP访问
curl -I http://120.24.22.244

# 测试域名访问
curl -I http://learning-system.top

# 检查DNS解析
nslookup learning-system.top
```

## 建议操作顺序

1. **立即可用**：使用IP地址 http://120.24.22.244 访问系统
2. **短期方案**：修改本地hosts文件进行测试
3. **长期方案**：完成域名备案流程

## 注意事项

- 域名备案是中国大陆服务器的法律要求
- 备案期间可以继续使用IP访问
- 备案完成后域名访问将自动恢复正常
- 建议同时申请SSL证书以支持HTTPS访问

## 联系支持

如果问题持续存在，可以：
1. 联系阿里云客服：95187
2. 提交工单说明域名访问被拦截问题
3. 提供服务器IP和域名信息

---
生成时间：$(date)
服务器IP：120.24.22.244
域名：learning-system.top