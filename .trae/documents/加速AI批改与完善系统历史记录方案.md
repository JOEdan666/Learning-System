# 加速AI批改与完善系统历史记录

针对您提出的两个核心问题，我制定了以下实施方案：

## 1. 加速AI批改速度 (性能优化)
目前的痛点是等待时间过长。我们将采用 **"本地即时评分 + AI异步分析"** 的混合模式：

- **即时反馈 (Immediate Feedback)**:
  - 在前端直接利用已知的正确答案，**毫秒级**计算出客观题（选择/判断）的分数。
  - 用户提交后**立即**看到 "初步得分" 和对错情况，无需等待AI。
- **异步分析 (Async Analysis)**:
  - AI 仅负责生成深度解析、错因分析和学习建议。
  - 在展示分数的界面下方显示 "AI正在深入分析..." 的状态，分析完成后自动刷新显示详细报告。
- **实施文件**: `app/components/LearningFlow/ResultStep.tsx`

## 2. 完善系统规划与历史记录 (系统架构)
您的数据库架构 (`prisma/schema.prisma`) 已经包含了 `LearningSession` (学习会话) 和 `LearningItem` (笔记) 表，基础是非常扎实的。现在的缺失点是**前端入口**和**数据聚合展示**。

### 方案详情：
1. **统一入口**:
   - 在首页 (`HeroSection` 或导航栏) 增加 **"我的学习档案"** (Learning History) 入口，让用户能找到之前的记录。
2. **增强历史页面 (`/learning-history`)**:
   - 该页面目前已存在，但功能不全。我将对其进行升级：
   - **新增 "我的笔记" 模块**: 调用 `/api/learning-items` 接口，展示您在 `NotesSection` 中保存的所有笔记内容。
   - **优化 "学习会话" 展示**: 确保能完整查看之前的做题记录、AI讲解内容。
3. **数据持久化保障**:
   - 确认 `LearningSession` 在会话结束时已完整写入数据库（现有代码已涵盖）。
   - 确认 `Notes` 已通过 JSON 格式存入 `LearningItem` 表（现有代码已涵盖）。

## 执行步骤
1. **修改 `ResultStep.tsx`**: 实现本地即时算分逻辑，优化用户等待体验。
2. **修改 `app/page.tsx`**: 添加 "学习历史" 的醒目入口。
3. **升级 `app/learning-history/page.tsx`**: 增加 "我的笔记" Tab 页，集成笔记数据的获取与展示。

此方案在不重构数据库的前提下，最大化利用现有架构，解决"慢"和"找不到记录"的问题。